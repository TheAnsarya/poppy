# 🗺️ Poppy Compiler v1.x Roadmap

**Current Version:** 1.0.0
**Released:** January 15, 2026
**Next Target:** v1.1.0 (Q1 2026)

---

## ✅ v1.0.0 - RELEASED (January 15, 2026)

### Core Compiler - 100% Complete

- ✅ Full 6502 instruction set (NES)
- ✅ Full 65816 instruction set (SNES)
- ✅ Full SM83 instruction set (Game Boy)
- ✅ All addressing modes for each architecture
- ✅ Global, local (@), and anonymous (+/-) labels
- ✅ Macro system with parameters and defaults
- ✅ Conditional assembly (.if, .ifdef, .ifndef)
- ✅ File inclusion (.include, .incbin)
- ✅ Repeat blocks (.rept)
- ✅ Assertions (.assert, .error, .warning)
- ✅ Alignment directives (.align, .pad)
- ✅ Data directives (.byte, .word, .long, .fill, .ds)

### ROM Generation - 100% Complete

- ✅ iNES 2.0 header generation (NES)
- ✅ SNES ROM headers (LoROM/HiROM/ExHiROM)
- ✅ Game Boy ROM headers (MBC1/3/5, CGB modes)
- ✅ Automatic checksum calculation
- ✅ Memory map generation (.map files)
- ✅ Debug symbol export (.sym, .nl, .mlb)

### Developer Tools - 100% Complete

- ✅ VS Code extension with IntelliSense
- ✅ Syntax highlighting for all platforms
- ✅ Code snippets (40+ patterns)
- ✅ Formatting provider
- ✅ Build task integration
- ✅ Go-to-definition and hover info

### Documentation - 100% Complete

- ✅ User manual (1,373 lines)
- ✅ Architecture guide
- ✅ Syntax specification
- ✅ NES reference
- ✅ SNES reference
- ✅ Game Boy guide
- ✅ Migration guides (ca65, ASAR)
- ✅ Example projects (NES, SNES, GB)

### Testing - 100% Complete

- ✅ 942 unit tests passing
- ✅ Integration tests for all platforms
- ✅ ROM generation validation
- ✅ VS Code extension tests (13 tests)

---

## 🎯 v1.1.0 - Enhanced Project System (Q1 2026)

**Target Release:** March 2026
**Focus:** Project-level features and workflow improvements

### Project System

- [ ] **Project File Support** - Proper `poppy.json` implementation
	- Multi-file compilation with dependencies
	- Include path configuration
	- Target-specific settings
	- Output configuration
- [ ] **Dependency Tracking** - Track file relationships
	- Detect circular includes
	- Build only changed files
	- Incremental compilation
- [ ] **Watch Mode** - Auto-rebuild on file changes
	- File system watcher
	- Minimal rebuild strategy
	- VS Code integration

### Enhanced Expression Evaluation

- [ ] **Complex Expressions** - Better expression parser
	- Operator precedence fixes
	- Parentheses support
	- Function-like operations
- [ ] **Built-in Functions** - Useful compile-time functions
	- `sizeof()` - Size of data block
	- `defined()` - Check symbol existence
	- `filesize()` - Size of included binary

### CLI Improvements

- [ ] **Better Error Messages** - Enhanced diagnostics
	- Did-you-mean suggestions
	- Show fix suggestions
	- Color-coded output
- [ ] **Progress Reporting** - Build progress indicators
	- File-by-file progress
	- Percentage complete
	- Time estimates

### VS Code Extension Enhancements

- [ ] **Workspace Symbols** - Cross-file symbol search
	- Find all label definitions
	- Find all macro definitions
	- Search across project
- [ ] **Refactoring** - Code refactoring tools
	- Rename symbol
	- Extract macro
	- Inline macro
- [ ] **Debugging Support** - Debug adapter protocol
	- Breakpoint support
	- Step through execution
	- Variable inspection

### Documentation

- [ ] Tutorial: Building a complete NES game
- [ ] Tutorial: Building a complete SNES game
- [ ] Tutorial: Building a complete GB game
- [ ] Video demonstrations

**Estimated Effort:** 6-8 weeks

---

## 🎯 v1.2.0 - Asset Pipeline (Q2 2026)

**Target Release:** June 2026
**Focus:** Asset conversion and data generation

### Asset Conversion

- [ ] **Graphics Pipeline** - Convert images to ROM data
	- PNG to CHR (NES 8x8 tiles)
	- PNG to SNES tiles (4bpp, 8bpp)
	- PNG to Game Boy tiles (2bpp)
	- Palette extraction
	- Tilemap generation
- [ ] **Compression Support** - Compress data
	- RLE compression
	- LZ77/LZSS compression
	- Custom compression hooks
- [ ] **Music Integration** - Audio data conversion
	- FamiTracker integration (NSF export)
	- SNES SPC export support
	- Game Boy music support

### Data Generation

- [ ] **Lookup Tables** - Generate tables
	- Sine/cosine tables
	- Multiplication/division tables
	- Custom function tables
- [ ] **Pattern Matching** - Data transformation
	- Find-and-replace patterns
	- Regex-based transformations
- [ ] **Enumerations** - Better enum support
	- Auto-increment values
	- Explicit value assignment
	- Enum-based constants

### Performance

- [ ] **Optimization Passes** - Code optimization
	- Peephole optimization
	- Dead code elimination
	- Constant folding
- [ ] **Faster Compilation** - Speed improvements
	- Parallel file processing
	- Cached symbol tables
	- Optimized code generation

**Estimated Effort:** 8-10 weeks

---

## 🎯 v1.3.0 - Advanced Features (Q3 2026)

**Target Release:** September 2026
**Focus:** Advanced language features

### Language Features

- [ ] **Structs** - Define data structures
	```asm
	.struct Sprite
		y:      .byte
		tile:   .byte
		attr:   .byte
		x:      .byte
	.endstruct
	
	my_sprite: .instanceof Sprite
	```

- [ ] **Namespaces** - Organize code
	```asm
	.namespace Engine
		.macro Init
		.endmacro
	.endnamespace
	
	Engine.Init  ; Call namespaced macro
	```

- [ ] **Advanced Macros** - More macro features
	- Variadic parameters
	- Macro recursion limits
	- Token concatenation
	- String manipulation

### Bank Management

- [ ] **Automatic Banking** - Compiler-managed banks
	- Auto-assign code to banks
	- Overflow detection
	- Cross-bank call helpers
- [ ] **Bank Directives** - Manual bank control
	```asm
	.bank 0
	.org $8000
	routine1:
	
	.bank 1
	.org $8000
	routine2:
	```

### Debugging

- [ ] **Source Maps** - Map binary to source
	- Line-level mapping
	- Symbol annotations
	- Expression tracking
- [ ] **Profiling Support** - Performance analysis
	- Cycle counting
	- Size reporting
	- Optimization hints

**Estimated Effort:** 6-8 weeks

---

## 📊 Version Comparison

| Feature | v1.0 | v1.1 | v1.2 | v1.3 |
|---------|------|------|------|------|
| **Core Compiler** | ✅ | ✅ | ✅ | ✅ |
| **Three Platforms** | ✅ | ✅ | ✅ | ✅ |
| **VS Code Extension** | ✅ | ✅ | ✅ | ✅ |
| **Project System** | Basic | ✅ | ✅ | ✅ |
| **Asset Pipeline** | - | - | ✅ | ✅ |
| **Structs/Namespaces** | - | - | - | ✅ |
| **Auto Banking** | - | - | - | ✅ |
| **Advanced Debugging** | Basic | ✅ | ✅ | ✅ |

---

## 🔮 Beyond v1.x

### Potential Features for v2.0

See [v2.0-roadmap.md](v2.0-roadmap.md) for details:

- Additional platforms (GBA, Genesis, SPC700)
- Language Server Protocol (LSP)
- Web-based compiler (WASM)
- Plugin system
- Alternative syntax modes

---

## 🎯 Success Metrics

### v1.1.0 Goals

- ✅ Compile multi-file projects without manual includes
- ✅ Watch mode working in VS Code
- ✅ Cross-file symbol navigation
- ✅ <500ms rebuild times for incremental changes

### v1.2.0 Goals

- ✅ Convert PNG to NES/SNES/GB tiles automatically
- ✅ Compress graphics data with RLE/LZ77
- ✅ Generate lookup tables from expressions
- ✅ <2s full project rebuild times

### v1.3.0 Goals

- ✅ Struct-based data layout working
- ✅ Namespace organization for large projects
- ✅ Automatic bank management functional
- ✅ Source-level debugging in Mesen/bsnes

---

## 📝 Contributing

Want to help with v1.x development?

1. Check [GitHub Issues](https://github.com/TheAnsarya/poppy/issues) for planned features
2. Comment on issues you're interested in
3. Submit PRs with tests and documentation

---

**Last Updated:** January 15, 2026
**Status:** v1.0.0 Released, planning v1.1.0
