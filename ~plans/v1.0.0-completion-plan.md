# üöÄ Poppy v1.0.0 Completion Plan

**Project:** Poppy Compiler & VS Code Extension
**Target Release:** v1.0.0
**Created:** January 14, 2026
**Status:** Final Push to Release

---

## üìä Current Status Overview

### Compiler Progress

| Component | Status | Tests | Notes |
|-----------|--------|-------|-------|
| Lexer | ‚úÖ 100% | 125 | All token types supported |
| Parser | ‚úÖ 100% | 67 | Full AST generation |
| 6502 Instructions | ‚úÖ 100% | 100+ | All 56 opcodes |
| 65816 Instructions | ‚úÖ 100% | 50+ | M/X sizing fixed, bank:addr done |
| SM83 Instructions | ‚úÖ 100% | 40+ | All Game Boy opcodes |
| Semantic Analysis | ‚úÖ 100% | 150+ | Symbols, labels, scoping |
| Code Generation | ‚úÖ 100% | 100+ | ROM builders integrated |
| Macro System | ‚úÖ 100% | 60+ | Full macro support |
| Include System | ‚úÖ 100% | 30+ | .include, .incbin |
| iNES Headers | ‚úÖ 100% | 20+ | iNES 1.0/2.0 |
| SNES Headers | ‚úÖ 100% | 27+ | SnesRomBuilder integrated |
| GB Headers | ‚úÖ 100% | 21+ | GbRomBuilder integrated |
| Debug Symbols | ‚úÖ 100% | 20+ | .nl, .mlb, .sym |
| Error Reporting | ‚úÖ 100% | 24+ | Context, formatting |

**Total Tests:** 942 passing

### VS Code Extension Progress

| Feature | Status | Notes |
|---------|--------|-------|
| Syntax Highlighting | ‚úÖ 100% | 6502/65816/SM83 |
| IntelliSense | ‚úÖ 100% | Opcodes, directives, labels |
| Code Snippets | ‚úÖ 100% | 40+ snippets |
| Formatting | ‚úÖ 100% | Column alignment |
| Go-to-Definition | ‚úÖ 100% | Labels |
| Hover Info | ‚úÖ 100% | Opcode docs |
| Build Tasks | ‚úÖ 100% | Integrated |
| Diagnostics | ‚úÖ 100% | Real-time |
| Test Suite | ‚úÖ 100% | 13 tests |

**Extension Status:** Ready for marketplace publish

---

## üéØ Release Requirements Checklist

### Critical (Must Have for v1.0.0)

#### Compiler Core
- [x] Parse and assemble 6502 code
- [x] Parse and assemble 65816 code
- [x] Parse and assemble SM83 code
- [x] Generate iNES ROMs with headers
- [x] Generate SNES ROMs with proper header placement
- [x] Generate Game Boy ROMs with proper header placement
- [x] Include file system (.include, .incbin)
- [x] Macro system with parameters
- [x] Conditional assembly
- [x] Local and anonymous labels
- [x] Debug symbol export

#### SNES Completion
- [x] M/X flag-aware instruction sizing
- [x] Bank:Address notation parsing ($7e:1234)
- [x] SNES ROM layout builder (SnesRomBuilder class)
- [x] Checksum calculation
- [x] Integrate SnesRomBuilder with CodeGenerator

#### Game Boy Completion
- [x] Verify all SM83 instructions emit correctly (#78 - DONE)
- [x] GB ROM builder with header placement (#79 - DONE)
- [x] Checksum/complement bytes
- [x] Integrate GbRomBuilder with CodeGenerator
- [ ] MBC bank switching documentation (#80)
- [ ] VRAM/WRAM organization guide (#81)
- [ ] CGB color features documentation (#82)

#### Testing
- [x] 942 unit tests passing
- [x] Integration tests for SNES ROM generation
- [x] Integration tests for GB ROM generation
- [ ] Manual test with real emulators

#### Documentation
- [x] User manual
- [x] SNES development guide
- [x] Game Boy development guide
- [ ] Migration guides (ca65, ASAR)
- [ ] API documentation

### Important (Should Have)

#### Project System
- [ ] Project file support (poppy.json)
- [ ] Multi-file compilation
- [ ] Watch mode for auto-rebuild

#### VS Code Extension
- [x] Publish to marketplace
- [ ] Update extension with latest compiler features
- [ ] Icon and branding

#### Examples
- [x] NES hello-world example
- [ ] SNES hello-world example
- [ ] Game Boy hello-world example

### Nice to Have (Can Defer)

- [ ] ExLoROM/ExHiROM support
- [ ] SPC700 support (SNES audio)
- [ ] Performance optimization
- [ ] Language server protocol (LSP)

---

## üìã Master Task List

### Epic 1: SNES Completion (Priority: P0)
**Parent Issue:** #75

| ID | Task | Status | Est | Priority |
|----|------|--------|-----|----------|
| T1 | Bank:Address notation parsing | ‚¨ú | 3h | P0 |
| T2 | SNES ROM layout builder | ‚¨ú | 4h | P0 |
| T3 | SNES checksum calculation | ‚¨ú | 2h | P0 |
| T4 | SNES integration tests | ‚¨ú | 3h | P0 |
| T5 | SNES example project | ‚¨ú | 2h | P1 |

### Epic 2: Game Boy Completion (Priority: P1)
**Parent Issue:** #48

| ID | Task | Status | Est | Priority |
|----|------|--------|-----|----------|
| T6 | GB ROM header placement | ‚¨ú | 2h | P0 |
| T7 | GB checksum calculation | ‚¨ú | 1h | P0 |
| T8 | GB header directives | ‚¨ú | 2h | P1 |
| T9 | GB integration tests | ‚¨ú | 2h | P1 |
| T10 | GB example project | ‚¨ú | 2h | P1 |
| T11 | GB development guide | ‚¨ú | 3h | P2 |

### Epic 3: Documentation (Priority: P1)
**Parent Issue:** #46

| ID | Task | Status | Est | Priority |
|----|------|--------|-----|----------|
| T12 | Complete user manual | ‚úÖ | - | Done |
| T13 | SNES development guide | ‚úÖ | - | Done |
| T14 | GB development guide | ‚¨ú | 3h | P1 |
| T15 | ca65 migration guide | ‚¨ú | 2h | P2 |
| T16 | ASAR migration guide | ‚¨ú | 2h | P2 |
| T17 | API documentation | ‚¨ú | 2h | P2 |

### Epic 4: VS Code Extension (Priority: P1)
**Parent Issue:** #47

| ID | Task | Status | Est | Priority |
|----|------|--------|-----|----------|
| T18 | Publish to marketplace | ‚¨ú | 1h | P0 |
| T19 | Create extension icon | ‚¨ú | 1h | P1 |
| T20 | Update README | ‚¨ú | 1h | P1 |

### Epic 5: Project System (Priority: P2)
**Parent Issue:** #45

| ID | Task | Status | Est | Priority |
|----|------|--------|-----|----------|
| T21 | Define poppy.json format | ‚¨ú | 2h | P2 |
| T22 | Project file parser | ‚¨ú | 3h | P2 |
| T23 | Multi-file compilation | ‚¨ú | 3h | P2 |
| T24 | Watch mode | ‚¨ú | 2h | P3 |

### Epic 6: Examples & Testing (Priority: P1)

| ID | Task | Status | Est | Priority |
|----|------|--------|-----|----------|
| T25 | SNES hello-world example | ‚¨ú | 2h | P1 |
| T26 | GB hello-world example | ‚¨ú | 2h | P1 |
| T27 | Test with bsnes emulator | ‚¨ú | 1h | P1 |
| T28 | Test with bgb emulator | ‚¨ú | 1h | P1 |

### Epic 7: Release Preparation (Priority: P0)

| ID | Task | Status | Est | Priority |
|----|------|--------|-----|----------|
| T29 | Version bump to 1.0.0 | ‚¨ú | 0.5h | P0 |
| T30 | Update CHANGELOG | ‚¨ú | 1h | P0 |
| T31 | Create release notes | ‚¨ú | 1h | P0 |
| T32 | Tag release | ‚¨ú | 0.5h | P0 |
| T33 | GitHub release | ‚¨ú | 0.5h | P0 |
| T34 | Announce release | ‚¨ú | 0.5h | P0 |

---

## üî¢ GitHub Issues to Create

### New Issues Needed

| # | Title | Type | Labels | Parent | Priority |
|---|-------|------|--------|--------|----------|
| NEW | Bank:Address notation parsing | feature | snes, parser | #75 | P0 |
| NEW | SNES ROM layout builder | feature | snes, codegen | #75 | P0 |
| NEW | SNES checksum calculation | feature | snes | #75 | P0 |
| NEW | SNES integration tests | test | snes, testing | #75 | P1 |
| NEW | SNES hello-world example | example | snes, docs | #75 | P1 |
| NEW | GB ROM header placement | feature | gameboy, codegen | #48 | P0 |
| NEW | GB checksum calculation | feature | gameboy | #48 | P0 |
| NEW | GB integration tests | test | gameboy, testing | #48 | P1 |
| NEW | GB hello-world example | example | gameboy, docs | #48 | P1 |
| NEW | GB development guide | docs | gameboy, docs | #46 | P1 |
| NEW | ca65 migration guide | docs | docs | #46 | P2 |
| NEW | ASAR migration guide | docs | docs | #46 | P2 |
| NEW | Publish VS Code extension | release | vscode | #47 | P0 |
| NEW | poppy.json project format | feature | project | #45 | P2 |
| NEW | v1.0.0 release preparation | release | release | - | P0 |

### Existing Issues to Close/Update

| # | Title | Action | Reason |
|---|-------|--------|--------|
| #69 | .include directive | Close | Already implemented |
| #9 | Include System Epic | Close | Complete |
| #10 | Label System Epic | Close | Complete |
| #11 | Directive System Epic | Close | Complete |
| #13 | Output Formats Epic | Update | 90% complete |

---

## ‚è±Ô∏è Time Estimates Summary

### By Priority

| Priority | Tasks | Est Hours | Notes |
|----------|-------|-----------|-------|
| P0 (Critical) | 10 | 18h | Must complete for release |
| P1 (Important) | 12 | 20h | Should complete |
| P2 (Nice to Have) | 6 | 14h | Can defer |
| P3 (Future) | 2 | 4h | Post-release |

### By Epic

| Epic | Tasks | Est Hours | Status |
|------|-------|-----------|--------|
| SNES Completion | 5 | 14h | 70% done |
| GB Completion | 6 | 12h | 50% done |
| Documentation | 6 | 12h | 60% done |
| VS Code Extension | 3 | 3h | 95% done |
| Project System | 4 | 10h | 0% done |
| Examples & Testing | 4 | 6h | 30% done |
| Release Prep | 6 | 4h | 0% done |

**Total Estimated Remaining Work:** ~50-60 hours

---

## üéØ Implementation Order

### Phase 1: Critical Path (P0 Tasks)
*Estimated: 18 hours*

1. **T1** - Bank:Address parsing (3h)
2. **T2** - SNES ROM layout builder (4h)
3. **T3** - SNES checksum (2h)
4. **T6** - GB ROM header placement (2h)
5. **T7** - GB checksum (1h)
6. **T18** - Publish VS Code extension (1h)
7. **T29-T34** - Release preparation (4h)

### Phase 2: Important Tasks (P1)
*Estimated: 20 hours*

1. **T4** - SNES integration tests (3h)
2. **T5** - SNES example project (2h)
3. **T8** - GB header directives (2h)
4. **T9** - GB integration tests (2h)
5. **T10** - GB example project (2h)
6. **T11** - GB development guide (3h)
7. **T14** - GB development guide (3h)
8. **T19-T20** - VS Code extension polish (2h)
9. **T27-T28** - Emulator testing (2h)

### Phase 3: Nice to Have (P2)
*Can defer to v1.1.0*

1. Migration guides
2. API documentation
3. Project system

---

## ‚úÖ Definition of Done

### For v1.0.0 Release

- [ ] All P0 tasks completed
- [ ] All 896+ tests passing
- [ ] SNES ROM generation verified with bsnes
- [ ] GB ROM generation verified with bgb
- [ ] VS Code extension published
- [ ] Documentation complete for core features
- [ ] At least one example project per platform
- [ ] CHANGELOG updated
- [ ] Version tagged and released

---

## üìÅ Files to Create/Modify

### New Files

```
docs/gb-guide.md                    # GB development guide
docs/migration-ca65.md              # ca65 migration guide
docs/migration-asar.md              # ASAR migration guide
examples/snes-hello-world/          # SNES example
examples/gb-hello-world/            # GB example
src/Poppy.Core/CodeGen/SnesRomBuilder.cs
src/Poppy.Core/CodeGen/GbRomBuilder.cs
```

### Files to Modify

```
src/Poppy.Core/Lexer/Lexer.cs       # Bank:Address parsing
src/Poppy.Core/Parser/Parser.cs     # Bank:Address AST
src/Poppy.Core/CodeGen/CodeGenerator.cs  # ROM builders
CHANGELOG.md                        # Release notes
README.md                           # Version update
```

---

## üîó Related Documents

- [Roadmap](../~docs/roadmap.md)
- [SNES Implementation Plan](snes-implementation-plan.md)
- [VS Code Extension Plan](vscode-extension-plan.md)
- [GitHub Issues Expanded](github-issues-expanded.md)

---

*Let's ship this! üöÄ*
